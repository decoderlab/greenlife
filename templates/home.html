{% extends 'template.html' %}
{% block content %}
    {% for message in get_flashed_messages() %}
      <div class="alert alert-success fade in">
	   {{ message }}
      </div>
     {% endfor %}
<h1>Home</h1>
<p>SQLAlchemy is an open source SQL toolkit and object-relational mapper (ORM) for the Python programming
    language released under the MIT License.[3]
    SQLAlchemy provides "a full suite of well known enterprise-level persistence patterns, designed for
    efficient and high-performing database access, adapted into a simple and Pythonic domain language".</p>
    <p>SQLAlchemy's philosophy is that SQL databases behave less and less like object collections the more
    size and performance start to matter, while object collections behave less and less like tables and
    rows the more abstraction starts to matter. For this reason it has adopted the data mapper pattern
    (like Hibernate for Java) rather than the active record pattern used by a number of other
    object-relational mappers.[4] However, optional plugins allow users to develop using
    declarative syntax.[5][6]
    </p></br>
    <h4>Schema definition</h4>

        <xmp style="white-space: pre-wrap;">
from sqlalchemy import *
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relation, sessionmaker

Base = declarative_base()

class Movie(Base):
    __tablename__ = 'movies'

    id = Column(Integer, primary_key=True)
    title = Column(String(255), nullable=False)
    year = Column(Integer)
    directed_by = Column(Integer, ForeignKey('directors.id'))

    director = relation("Director", backref='movies', lazy=False)

    def __init__(self, title=None, year=None):
        self.title = title
        self.year = year

    def __repr__(self):
        return "Movie(%r, %r, %r)" % (self.title, self.year, self.director)

class Director(Base):
    __tablename__ = 'directors'

    id = Column(Integer, primary_key=True)
    name = Column(String(50), nullable=False, unique=True)

    def __init__(self, name=None):
        self.name = name

    def __repr__(self):
        return "Director(%r)" % (self.name)

engine = create_engine('dbms://user:pwd@host/dbname')
Base.metadata.create_all(engine)</xmp>

{% endblock %}
